1                                                          The SAS System                              17:06 Tuesday, August 9, 2016

NOTE: Copyright (c) 2002-2012 by SAS Institute Inc., Cary, NC, USA. 
NOTE: SAS (r) Proprietary Software 9.4 (TS1M3 MBCS3170) 
      Licensed to Van der Vorst Arnaud-E33271, Site 70068118.
NOTE: This session is executing on the Linux 3.10.0-327.22.2.el7.x86_64 (LIN X64) platform.



NOTE: Updated analytical products:
      
      SAS/STAT 14.1
      SAS/ETS 14.1
      SAS/OR 14.1
      SAS/IML 14.1
      SAS/QC 14.1

NOTE: Additional host information:

 Linux LIN X64 3.10.0-327.22.2.el7.x86_64 #1 SMP Thu Jun 23 17:05:11 UTC 2016 x86_64 CentOS Linux release 7.2.1511 (Core)  

You are running SAS 9. Some SAS 8 files will be automatically converted 
by the V9 engine; others are incompatible.  Please see 
http://support.sas.com/rnd/migration/planning/platform/64bit.html

PROC MIGRATE will preserve current SAS file attributes and is 
recommended for converting all your SAS libraries from any 
SAS 8 release to SAS 9.  For details and examples, please see
http://support.sas.com/rnd/migration/index.html


This message is contained in the SAS news file, and is presented upon
initialization.  Edit the file "news" in the "misc/base" directory to
display site-specific news and information in the program log.
The command line option "-nonews" will prevent this display.




NOTE: SAS initialization used:
      real time           0.02 seconds
      cpu time            0.03 seconds
      
1          *;
2          libname insaslib "/tmp/viya/";
NOTE: Libref INSASLIB was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /tmp/viya
3          libname ousaslib "/tmp/v94/";
NOTE: Libref OUSASLIB was successfully assigned as follows: 
      Engine:        V9 
      Physical Name: /tmp/v94
4          *;
5          
6          /* The first method only works for joining skp1 with matm2, not for joining skp1 with skp1_cilinders. */
7          
8          /* Sort skp_cilinders by ts_be */
9          *proc sort 	data=insaslib.skp_cilinders
10         *			out=ousaslib.skp_cilinders; /* All unique, cf. 0007AreCilinderKeysUnique.sas */
11         *	by einddatum einddatumskp; /* The logs should be non-overlapping, so actually, einddatumskp is obsolete here. */
2                                                          The SAS System                              17:06 Tuesday, August 9, 2016

12         *run;
13         
14         /* Sort skp1_pv by ts_registratie */
15         *proc sort data=ousaslib.skp1allplusKeys;
16         *	by ts_registratie;
17         *run;
18         
19         /* At this point, both skp_cilinders and skp1_pv_all should be sorted by timestamp.
20            Obs in skp_cilinders start in 2010, those in skp1_pv_all start in 2015. */
21         *data ousaslib.skp1allplusKeysplusCilinders;
22         *	if _n_ = 1 then do;
23         *		set ousaslib.skp1allplusKeys;
24         *		einddatumskp = .; /* not really needed */
25         *	end;
26         *	do while (einddatumskp < ts_registratie);
27         *		set ousaslib.skp_cilinders; /* ts_ei UP */
28         *	end;
29         *	do while (ts_registratie <= einddatumskp);
30         *		if (ts_registratie >= einddatum) then output;
31         *		set ousaslib.skp1allplusKeys;  /* ts_registratie UP */
32         *	end;
33         	*keep ts_be ts_ei cl_n dch_n bew_vn ts_registratie d100; /* only KeyCols */
34         *run;
35         
36         /* Measure real time */
37         options fullstimer;
38         %let t = %sysfunc(datetime());
39         
40         *data ousaslib.skp_cilinders;
41         *	set insaslib.skp_cilinders;
42         *	ComponentDigits = input(substr(ComponentName,length(ComponentName)-1,2),2.0);
43         *run;
44         
45         /* Create macros to rename variables in skp_cilinders for T (top) and B (bottom) side. */
46         proc contents data=ousaslib.skp_cilinders out=varnames;

NOTE: The data set WORK.VARNAMES has 49 observations and 41 variables.
NOTE: The PROCEDURE CONTENTS printed pages 1-2.
NOTE: PROCEDURE CONTENTS used (Total process time):
      real time           0.04 seconds
      user cpu time       0.04 seconds
      system cpu time     0.01 seconds
      memory              3470.09k
      OS Memory           10144.00k
      Timestamp           09/08/2016 05:06:16 PM
      Step Count                        1  Switch Count  1
      Page Faults                       0
      Page Reclaims                     2013
      Page Swaps                        0
      Voluntary Context Switches        2
      Involuntary Context Switches      0
      Block Input Operations            0
      Block Output Operations           160
      

47         data _null_;
48         	length _Tvars $6000 _Bvars $6000;
49         	retain _Tvars _Bvars ;
3                                                          The SAS System                              17:06 Tuesday, August 9, 2016

50         	set varnames end=last;
51         	_Tvars = catx( " ", _Tvars, catx( "=", name, 't'||strip(name) ) ) ;
52         	_Bvars = catx( " ", _Bvars, catx( "=", name, 'b'||strip(name) ) ) ;
53         	if last then do;
54         		call symputx("toplist", _Tvars);			
55         		call symputx("bottomlist", _Bvars);
56         	end;
57         run;

NOTE: There were 49 observations read from the data set WORK.VARNAMES.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      user cpu time       0.00 seconds
      system cpu time     0.00 seconds
      memory              1141.56k
      OS Memory           10656.00k
      Timestamp           09/08/2016 05:06:16 PM
      Step Count                        2  Switch Count  0
      Page Faults                       0
      Page Reclaims                     733
      Page Swaps                        0
      Voluntary Context Switches        0
      Involuntary Context Switches      0
      Block Input Operations            0
      Block Output Operations           0
      

58         
59         %put &=toplist.; %put &=bottomlist.;
TOPLIST=Afname=tAfname Afwerking=tAfwerking BeginDatum=tBeginDatum Bolvorm=tBolvorm BorgpenHydrMoerOK=tBorgpenHydrMoerOK 
CilinderDiameterBegin=tCilinderDiameterBegin CilinderDiameterEindeAutoLinks=tCilinderDiameterEindeAutoLinks 
CilinderDiameterEindeAutoRechts=tCilinderDiameterEindeAutoRechts CilinderDiameterEindeMan=tCilinderDiameterEindeMan 
CodeSlijpReden=tCodeSlijpReden ComponentDigits=tComponentDigits ComponentId=tComponentId ComponentName=tComponentName 
EindDatum=tEindDatum FlagMSMQIBM=tFlagMSMQIBM FlagMSMQQE=tFlagMSMQQE Hardheid=tHardheid Hardheid2=tHardheid2 Hardheid3=tHardheid3 
Hardheid4=tHardheid4 Hardheid5=tHardheid5 HardheidTestgrens=tHardheidTestgrens HistoryId=tHistoryId HistoryTime=tHistoryTime 
LagersTappenOK=tLagersTappenOK OKVoorWals=tOKVoorWals OKVoorWalsNaSlijping=tOKVoorWalsNaSlijping Opharding=tOpharding 
Opligtijd=tOpligtijd Pause=tPause ProgrammaNaam=tProgrammaNaam ProgrammaOnderbroken=tProgrammaOnderbroken 
RedenTeHogeSlijptijd=tRedenTeHogeSlijptijd Ruwheid=tRuwheid Slag=tSlag SlijpOpmerking=tSlijpOpmerking SlijpTijd=tSlijpTijd 
SlijpTijdUUMMSS=tSlijpTijdUUMMSS Slijpkurve=tSlijpkurve Slijpmachine=tSlijpmachine 
SlijpsteenComponentTypeId=tSlijpsteenComponentTypeId SlijpsteenDiameter=tSlijpsteenDiameter TijdAfruwen=tTijdAfruwen 
TijdAfruwenUUMMSS=tTijdAfruwenUUMMSS TijdAfwerken=tTijdAfwerken TijdAfwerkenUUMMSS=tTijdAfwerkenUUMMSS 
WerkNummerAfname=tWerkNummerAfname WerkNummerSlijp=tWerkNummerSlijp einddatumskp=teinddatumskp
BOTTOMLIST=Afname=bAfname Afwerking=bAfwerking BeginDatum=bBeginDatum Bolvorm=bBolvorm BorgpenHydrMoerOK=bBorgpenHydrMoerOK 
CilinderDiameterBegin=bCilinderDiameterBegin CilinderDiameterEindeAutoLinks=bCilinderDiameterEindeAutoLinks 
CilinderDiameterEindeAutoRechts=bCilinderDiameterEindeAutoRechts CilinderDiameterEindeMan=bCilinderDiameterEindeMan 
CodeSlijpReden=bCodeSlijpReden ComponentDigits=bComponentDigits ComponentId=bComponentId ComponentName=bComponentName 
EindDatum=bEindDatum FlagMSMQIBM=bFlagMSMQIBM FlagMSMQQE=bFlagMSMQQE Hardheid=bHardheid Hardheid2=bHardheid2 Hardheid3=bHardheid3 
Hardheid4=bHardheid4 Hardheid5=bHardheid5 HardheidTestgrens=bHardheidTestgrens HistoryId=bHistoryId HistoryTime=bHistoryTime 
LagersTappenOK=bLagersTappenOK OKVoorWals=bOKVoorWals OKVoorWalsNaSlijping=bOKVoorWalsNaSlijping Opharding=bOpharding 
Opligtijd=bOpligtijd Pause=bPause ProgrammaNaam=bProgrammaNaam ProgrammaOnderbroken=bProgrammaOnderbroken 
RedenTeHogeSlijptijd=bRedenTeHogeSlijptijd Ruwheid=bRuwheid Slag=bSlag SlijpOpmerking=bSlijpOpmerking SlijpTijd=bSlijpTijd 
SlijpTijdUUMMSS=bSlijpTijdUUMMSS Slijpkurve=bSlijpkurve Slijpmachine=bSlijpmachine 
SlijpsteenComponentTypeId=bSlijpsteenComponentTypeId SlijpsteenDiameter=bSlijpsteenDiameter TijdAfruwen=bTijdAfruwen 
TijdAfruwenUUMMSS=bTijdAfruwenUUMMSS TijdAfwerken=bTijdAfwerken TijdAfwerkenUUMMSS=bTijdAfwerkenUUMMSS 
WerkNummerAfname=bWerkNummerAfname WerkNummerSlijp=bWerkNummerSlijp einddatumskp=beinddatumskp
60         
61         data ousaslib.skp_cilinders_T(rename=(&toplist.)) ousaslib.skp_cilinders_B(rename=(&bottomlist.));
62         	set ousaslib.skp_cilinders;
4                                                          The SAS System                              17:06 Tuesday, August 9, 2016

63         run;

NOTE: There were 1443 observations read from the data set OUSASLIB.SKP_CILINDERS.
NOTE: The data set OUSASLIB.SKP_CILINDERS_T has 1443 observations and 49 variables.
NOTE: The data set OUSASLIB.SKP_CILINDERS_B has 1443 observations and 49 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      user cpu time       0.01 seconds
      system cpu time     0.01 seconds
      memory              1128.68k
      OS Memory           10912.00k
      Timestamp           09/08/2016 05:06:16 PM
      Step Count                        3  Switch Count  0
      Page Faults                       0
      Page Reclaims                     345
      Page Swaps                        0
      Voluntary Context Switches        0
      Involuntary Context Switches      0
      Block Input Operations            0
      Block Output Operations           3600
      

64         
65         /*proc sql;
66         	create table ousaslib.skp1allplusKeysplusCilinders1
67         	as select a.*, b.*
68         	from ousaslib.skp1allplusKeys a
69             left join ousaslib.skp_cilinders_T b
70             on (
71               	(b.tComponentDigits = a.d417)
72             and 	
73                 (b.teinddatum <= a.ts_registratie and a.ts_registratie <= b.teinddatumskp)
74                 );
75         quit;*/
76         
77         
78         proc sql;
79         	create table ousaslib.skp1allplusKeysplusCilinders
80         	as select a.*, b.*
81         	from ousaslib.skp1allplusKeysplusCilinders1 a
82             left join ousaslib.skp_cilinders_B b
83             on (
84               	(b.bComponentDigits = a.d417)
85             and 	
86                 (b.beinddatum <= a.ts_registratie and a.ts_registratie <= b.beinddatumskp)
87                 );
NOTE: Table OUSASLIB.SKP1ALLPLUSKEYSPLUSCILINDERS created, with 5740392 rows and 685 columns.

88          			  /*order by a.cl_n, a.bew_vn, a.dch_n, a.ts_registratie*/
89         quit;
NOTE: PROCEDURE SQL used (Total process time):
      real time           11:44.27
      user cpu time       51.06 seconds
      system cpu time     51.78 seconds
      memory              22395.67k
      OS Memory           33548.00k
      Timestamp           09/08/2016 05:18:00 PM
      Step Count                        4  Switch Count  0
5                                                          The SAS System                              17:06 Tuesday, August 9, 2016

      Page Faults                       5
      Page Reclaims                     1591
      Page Swaps                        0
      Voluntary Context Switches        11686
      Involuntary Context Switches      380
      Block Input Operations            40100712
      Block Output Operations           66799776
      

90         
91         /* The code below does not work.
92            See also: 0018SKP1plusKeysplusCilinders_ERROR.log */
93         /*proc ds2;
94         	data ousaslib.skp1allplusKeysplusCilinders1(overwrite=yes);
95         	method run();
96         		set { select *
97         			  from ousaslib.skp1allplusKeys a
98               		  left join ousaslib.skp_cilinders_T b
99               		  on (
100              		  		(b.tComponentDigits = a.d417)
101              		  and 	
102              		  		(b.teinddatum <= a.ts_registratie and a.ts_registratie <= b.teinddatumskp)
103              		  	 )
104         			  order by a.cl_n, a.bew_vn, a.dch_n, a.ts_registratie
105        			};
106        		if 1=1 then output ousaslib.skp1allplusKeysplusCilinders1;
107        	    end;
108        	enddata;
109        	run;
110        quit;
111        
112        proc ds2;
113        	data ousaslib.skp1allplusKeysplusCilinders(overwrite=yes);
114        	method run();
115        		set { select *
116        			  from ousaslib.skp1allplusKeysplusCilinders1 a
117              		  left join ousaslib.skp_cilinders_B b
118              		  on (
119              		  		(b.ComponentDigits_B = a.d418)
120              		  and 	
121              		  		(b.beinddatum <= a.ts_registratie and a.ts_registratie <= b.beinddatumskp)
122              		  	 )
123         			  order by a.cl_n, a.bew_vn, a.dch_n, a.ts_registratie
124        			};
125        		if 1=1 then output ousaslib.skp1allplusKeysplusCilinders;
126        	    end;
127        	enddata;
128        	run;
129        quit;
130        
131        proc datasets library=ousaslib nolist;
132        	delete skp_cilinders_T skp_cilinders_B skp1allplusKeysplusCilinders1 / memtype=data;
133        run;*/
134        
135        %put ### %sysevalf( %sysfunc(datetime()) - &t. );
### 704.350359916687
136        
137        /* end of program */
6                                                          The SAS System                              17:06 Tuesday, August 9, 2016

138        
139        /* test code */
140        
141        /*
142        data work.cil;
143        	length ComponentName $ 45;
144        	input ComponentName $30.;
145        	ComponentDigits = input(substr(ComponentName,length(ComponentName)-1,2),2.0);
146        datalines;
147        POSB10
148        PUE62
149        ;
150        run;
151        
152        data work.skp
153        	length d417;
154        	input d417 9.2;
155        datalines;
156        0.0
157        0.0
158        10.0
159        62.0
160        48.0
161        62.0
162        ;
163        run;
164        
165        proc ds2;
166        	data work.merged(overwrite=yes);
167        	method run();
168        		set { select *
169        			  from work.skp a
170              		  left join work.cil b
171              		  on b.ComponentDigits = a.d417
172        			};
173        		if 1=1 then output work.merged;
174        	    end;
175        	enddata;
176        	run;
177        quit;
178        */

NOTE: SAS Institute Inc., SAS Campus Drive, Cary, NC USA 27513-2414
NOTE: The SAS System used:
      real time           11:44.37
      user cpu time       51.14 seconds
      system cpu time     51.81 seconds
      memory              30722.59k
      OS Memory           33548.00k
      Timestamp           09/08/2016 05:18:00 PM
      Step Count                        4  Switch Count  18
      Page Faults                       5
      Page Reclaims                     10270
      Page Swaps                        0
      Voluntary Context Switches        11755
      Involuntary Context Switches      383
      Block Input Operations            40100712
      Block Output Operations           66803592
7                                                          The SAS System                              17:06 Tuesday, August 9, 2016

      
